/*! Fleet Manager - v1.2.9
 * https://iworks.pl/
 * Copyright (c) 2020; * Licensed GPLv2+ */

jQuery(document).ready(function(a){a(function(){a(".iworks-fleet-row .datepicker").each(function(){var b=a(this).data("date-format")||"yy-mm-dd";a(this).datepicker({dateFormat:b})})})}),jQuery(document).ready(function(a){var b=[],c={action:"iworks_fleet_persons_list",_wpnonce:iworks_fleet.nonces.iworks_fleet_persons_list_nonce,user_id:iworks_fleet.user_id};a.post(ajaxurl,c,function(c){c.success&&(b=c.data,a("select",a("#iworks-crews-list")).select2({data:b}),a("select",a(".iworks-owners-list-container tbody")).each(function(){var c=b;c.unshift({id:"-",text:"-select-"}),a(this).select2({data:c})}))}),a(function(){a(".iworks-add-crew").on("click",function(){var c=a("#iworks-crews-list"),d=Date.now(),e=wp.template("iworks-boat-crew");return c.append(e({id:d})).ready(function(){var c=a("#iworks-crew-"+d);a("select",c).select2({data:b})}),!1})});var d=a(".iworks-owners-list-container tbody"),e=parseInt(a("#iworks_fleet_boat_build_year").val());a("a.iworks-fleet-boat-delete",d).on("click",function(){return a(this).closest("tr").detach(),!1}),a(".datepicker",d).each(function(){a(this).datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,yearRange:0<e?e+":+0":"1955:+0",dateFormat:a(this).data("date-format")||"yy-mm-dd"})}),a("#iworks-owners-list-add").on("click",function(){var c=wp.template("iworks-fleet-boat-owner"),f="iworks-fleet-boat-owner-"+Date.now(),g=b;return g.unshift({id:"-",text:"-select-"}),d.append(c({id:f})).ready(function(){var b=a("#"+f);a("a.iworks-fleet-boat-delete",b).on("click",function(){return a(this).closest("tr").detach(),!1}),a("select",b).select2({data:g}),a(".datepicker",b).each(function(){a(this).datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,yearRange:0<e?e+":+0":"1955:+0",dateFormat:a(this).data("date-format")||"yy-mm-dd"})})}),!1})}),jQuery(document).ready(function(a){}),jQuery(document).ready(function(a){a(function(){a(".post-type-iworks_fleet_result #race button").on("click",function(b){b.preventDefault();var c=new FormData;a.each(a("#file_fleet_races")[0].files,function(a,b){c.append("file",b,b.name)}),c.append("action","iworks_fleet_upload_races"),c.append("id",a("#post_ID").val()),c.append("_wpnonce",a("#iworks_fleet_posttypes_result").val());var c={url:ajaxurl,method:"POST",type:"POST",cache:!1,data:c,contentType:!1,processData:!1};return a.ajax(c),!1})})}),jQuery(document).ready(function(a){a("select.iworks-select2").select2()});